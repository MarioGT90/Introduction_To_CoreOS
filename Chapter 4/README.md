## Chapter 4: Launching a development CoreOS Cluster* Chapter 4 Introduction Slide:  In this chapter, we will create a development CoreOS cluster, deploy our first service, experiment with some CoreOS tools including fleet & etcd, and finally learn how to troubleshoot common container and OS issues.###  0401 Installing dependencies (Docker, Vagrant, fleetctl)* (Chapter 4 Intro Slide) In this video tutorial series, I will be using my Apple computer to demonstrate everything.  If you also have an Apple computer, then you should be able to follow right along with all of the examples.  For those of you running Linux or Unix based operating systems, the demonstrated content should be very similar for your computers.  If you have a Windows based system, then you may have more difficulties, simply because the tools for CoreOS have not been all ported to Windows.* The simplist way to started with CoreOS is to run one or more instances inside virtual machines on your local development computer.  This is obviously not the best for performance and certianly shouldn't be used in production, but it does makes it easy to start experimenting with the platform.* Throughout this tutorial series, we're going to make use of several open source tools: * Vagrant for CoreOS Virtual Machine Management * git for downloading code examples * Docker CLI and Daemon for building/testing Docker images * fleetctl, a CLI tool for managing applications deployed in CoreOS * etcdctl, a CLI tool for managing data within the etcd database* Before we can boot our first CoreOS cluster, we need to make sure we have all pre-requisite software installed.  We're going to be using Vagrant with VirtualBox to manage CoreOS virtual machines on our computer.  Vagrant & VirtualBox should work on every major operating system, but please refer to the Vagrant Documentation on using alternative providers like VMWare: https://docs.vagrantup.com/v2/providers/index.html* To get started, please install Vagrant onto your development workstation.  Installation instructions can be found from the vagrantup.com documenation here: https://docs.vagrantup.com/v2/installation/index.html* I have already installed Vagrant on this computer, as I have access to the vagrant command:```vagrant -v```* Another important software package that we'll be using is Git, which is a software versioning system.  All of the code examples and accompanying documetation for this tutorial series will be hosted on my GitHub account, https://github.com/rosskukulinski in the Introduction To CoreOS repository: https://github.com/rosskukulinski/Introduction_To_CoreOS.  On Apple OSX, you should have the git client pre-installed.  Windows and Linux systems will need to install it if you haven't already.  You can visit the Git website (https://git-scm.com/) for installation directions for your platform.* Once you have Git installed, lets download the accompanying materials for this video tutorial.  ```git clone https://github.com/rosskukulinski/Introduction_To_CoreOS.gitcd Introduction_To_CoreOS```All of the example code for this video tutorial is in this current directory.If you run into any problems or find a bug in any of these exercises, postingan issue on GitHub is a great way to get in touch with me.  Creating an issue is easy:Once you have a GitHub account, simply navigate to this repository, click on Issues,then create new issue.  I'll be notified the moment you create an issue, and I'lltry to respond as quickly as possible.If you've found a bug, and think you know how to fix it, I always appreciatepull requests.Note: Given that CoreOS is in active development, new versions of tools like fleetctl are released regularly, likewise with CoreOS itself and the Vagrantfile. Ensure that you're using the version of the client tools that match the version of CoreOS to which you're connecting.* Now we have everything installed that we need to boot our development CoreOS cluster.###	0402 Boot your first cluster* In this session, we are going to launch our first CoreOS development cluster.  The Vagrant* We're going to be following the CoreOS Documentation for running CoreOS within a Vagrant virtual machine on your development workstation.  You can find the most up-to-date documentation here: https://coreos.com/docs/running-coreos/platforms/vagrant/```git clone https://github.com/coreos/coreos-vagrant.gitcd coreos-vagrant```Edit user-data and config.rb```vagrant upvagrant statusvagrant ssh core-01 -- -Afleetctl list-machinesfleetctl list-machines -fullvagrant haltvagrant destroy```If we want to exit our ssh connection, we can either press CTRL-D, or type ```exit``` and hit enter.  When we exit the SSH session, the CoreOS virtual machines are still running.  This is great for testing and debugging applications as you build them.Vagrant tips: You can SSS into the VM with vagrant ssh, and exit the SSH session again with Ctrl-d. This leaves the VM running, just vagrant ssh again to get back in. If you modify the Vagrantfile you can use vagrant reload --provision to have Vagrant reload the config and restart the VM. Use vagrant halt to terminate the VM (like powering off) and vagrant destroy to blow it away, losing all data inside. For further information on how to use Vagrant, see vagrant --help.If we want to have a larger cluster, we first need to destroy the old cluster.To do that, we'll run ```vagrant destroy``` to delete the cluster.  This willprompt you to make sure you really want to destroy each virtual machine.  You canoptionally add a -f flag to destroy all of the VMs without prompting.Now that we've got a clean slate, we can edit our config.rb to increase the num_instances variable, and then run ```vagrant udp``` to provision a new cluster.Now can then SSH into the newly created Virtual machiens:```vagrant ssh core-04 -- -Afleetctl list-machinesexitvagrant destroy```and see all 5 CoreOS instances.  In general, unless you have a really powerfulcomputer, I recommend running either 1 or 3 CoreOS instances.  Running threehas the advantage of allowing your development environment more closelyemulate a production environment, but it does require more power than a singlevirtual machine.So that's it for this tutorial.  We have successfully launched three node and fivenode CoreOS clusters on our local computer using Vagrant and VirtualBox.###	0403 fleetctl & “Hello World” service###	0404 Dockerized service###	0405 Troubleshooting running container###	0406 Toolbox###	0407 etcd & etcdctl